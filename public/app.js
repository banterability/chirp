// Generated by CoffeeScript 1.8.0
var editable;

editable = document.querySelectorAll('.update');

[].forEach.call(editable, function(node) {
  node.addEventListener('click', function() {
    return this.contentEditable = true;
  }, false);
  return node.addEventListener('input', function() {
    var parentId, payload;
    parentId = this.parentNode.id;
    this.parentNode.classList.add('dirty');
    payload = {
      user: parentId,
      message: this.textContent
    };
    console.log('--> sending', payload);
    return Jaxx.post('/update', payload, function() {
      return console.log('<-- response', this.responseText);
    }, function() {
      return console.log('ajax failure', this);
    });
  }, false);
});
